---
name: "fop"
title: "宠物信息交流平台"
publishedAt: "2024-09-06"
summary: "移动端的Web应用开发"
githubRepo: "fop"
images:
  - "/images/projects/fop/cover-01.jpg"
team:
  - name: "notURandomDev"
    role: "前端开发（移动端） "
    avatar: "https://avatars.githubusercontent.com/u/126687028?s=64&v=4"
    github: "https://github.com/notURandomDev"
  - name: "WuJiaZhe123"
    role: "前端开发（PC端）"
    avatar: "https://avatars.githubusercontent.com/u/148238941?s=64&v=4"
    github: "https://github.com/WuJiaZhe123"
  - name: "WHS1145"
    role: "后端开发（DBA + API接口）"
    avatar: "https://avatars.githubusercontent.com/u/168970481?s=64&v=4"
    github: "https://github.com/WHS1145"
  - name: "a-usre"
    role: "项目经理、测试人员、文档撰写"
    avatar: "https://avatars.githubusercontent.com/u/147981364?s=64&v=4"
    github: "https://github.com/a-usre"
  - name: "Tianci Xie"
    role: "后端开发（API接口）"
---

## 1. 项目总览

### 1.1. 项目选题

在本次短学期下发任务的安排来看，我们需要从老师提供 9 个题目中选出一个，作为将要完成的项目。

<Table
  data={{
    headers: [{ content: "具体项目名称", key: "projects" }],
    rows: [
      ["团队任务协作系统"],
      ["在线题库与组卷系统"],
      ["在线学习平台"],
      ["校园二手交易系统"],
      ["设施报修管理系统"],
      ["宠物信息交流平台"],
      ["旅游管理系统"],
      ["在线招聘系统"],
      ["AI 驱动的客户支持系统"],
    ],
  }}
/>

在综合考虑项目开发时间周期、项目开发难度、开发人员分配之后；我们小组选择了业务流程门槛较低的【宠物信息交流平台】

从人员分配上来看，我们团队有 5 个人，每个人都分配到了不同的任务：

<Table
  data={{
    headers: [
      { content: "开发人员", key: "developer" },
      { content: "任务", key: "task" },
    ],
    rows: [
      ["楼乐天", "项目经理、测试人员、文档撰写"],
      ["吴佳哲", "前端开发（PC端）"],
      ["黄子烨", "前端开发（移动端）"],
      ["王浩屾", "后端开发（DBA + API接口）"],
      ["谢天赐", "后端开发（API接口）"],
    ],
  }}
/>

我们小组取了一个有趣的名字 -【418TEAPOTS】

![](/images/projects/fop/image-01.png)

### 1.2. 项目周期（为期 10 天）

![](/images/projects/fop/image-02.png)

### 1.3. 主要目标

我负责移动端的开发，移动端实现了多个功能。在社区主页，用户能够刷帖子；进入帖子详情页面，可以查看帖子的详细内容，其中评论区支持新增和删除评论操作。用户还能在移动端进行帖子的发布，发布时需填写用户信息、正文、图片，详情项会根据帖子类型的不同而变化。

移动端的个人主页包含多个模块。用户信息模块展示用户昵称、联系方式、头像（可更改）和个人简介；个人动态模块展示用户自己发布过的帖子，且支持删除操作；宠物画廊模块以图片搭配标题的形式，用于展示用户的宠物照片。

PC 端作为管理员界面，可对帖子、用户、评论三个实体进行管理。

## 2. 使用到的技术

### 2.1. 前端技术

**移动端**

框架用的是 Vue3，UI 组件库使用 Vuetify + Element Plus

**PC 端**

框架使用 React.js，UI 组件库用的是 Ant Design

### 2.2. 后端技术

- 数据库：SQL Sever
- 框架：Springboot（JAVA）

## 3. 项目阶段

### 3.1. 项目选题

按照老师的要求，该项目需要两份前端的工程（移动端和 PC 端），一份后端的工程；而我们的选题是【宠物信息交流平台】

### 3.2. 需求分析

在这个阶段，我们先通过竞品分析，了解了【宠物信息交流平台】的案例网站，以下为主要参考网站

[全国宠友互助社区 - 免费宠物领养*寻猫启示*寻狗启事\_犬猫配种宠物平台](https://www.chongyoushe.com/)

[爱宠网 - 有爱有趣有用的宠物门户网站！](https://www.lovepet.cn/)

经过一番研究之后，我们大概了解了该类网站的业务逻辑：PC 端负责展示帖子的信息，而发布帖子的功能是在移动端通过微信小程序的形式进行使用（发布帖子的时候网站需要用户扫描二维码）

尽管我们分析的竞品是这种业务逻辑，我们小组在讨论之后则打算采用另外一种方案，即在移动端实现用户操作的所有功能（包括发布帖子），在 PC 端做一个管理员后台。

当然，这和老师给我们的解释也有关系；因为短学期的项目目的是使尽可能多的同学参与开发当中。因此，要是 PC 端和移动端的功能耦合程度大，无论是对于开发难度还是用户使用体验程度而言都是不适合的。

### 3.3. 方案设计

本阶段，是原型的设计阶段；为了能够推动项目的快速进展，我们在画原型的时候采用了笔绘，省去了使用原型工具时对于样式的过度纠结，专注于设计各个界面如何对各种数据进行展示。

**移动端的原型设计（笔绘版）**

<Row gap="32">
  <Column flex="1">![](/images/projects/fop/image-03.jpeg)</Column>
  <Column flex="1">![](/images/projects/fop/image-04.jpg)</Column>
  <Column flex="1">![](/images/projects/fop/image-05.jpg)</Column>
  <Column flex="1">![](/images/projects/fop/image-06.jpeg)</Column>
  <Column flex="1">![](/images/projects/fop/image-07.jpg)</Column>
</Row>

图中分别是：发表帖子界面、个人动态界面、社区主页界面、帖子详情界面、用户登录界面

当然，笔绘版本的原型设计稿出来之后，我们的项目经理为我们完成了 Axure 的原型设计

### 3.4. 详细设计

在原型确定下来之后，前端需要的数据项也就明确了，于是我们就开始了 API 的设计；于此同时，我们小组成立了飞书的组织，因为我认为使用云文档进行 API 文档的书写能够提高团队的沟通效率：团队中的所有成员能够实时对文档中变化的内容进行查看并且进行修改（除了短学期的上课时间，我们团队中的成员大部分时间是分开办公的，因此在开发过程中如果对某些数据项或返回信息的要求有变更，就能够通过 API 云文档进行即时的修改与反馈）

### 3.5. 代码开发

API 的规范定好之后，我就开始了前端界面代码的编写。对我来说，这个阶段是整个项目中耗时最长的；其中不仅包括了 UI 样式布局的分配（Vuetify 提供 style api 其实帮了很多忙，大部分情况下不用手搓 css），还有涉及到 UX 的操作逻辑和数据的动态响应和 DOM 的动态渲染等，大致算下来使用了 6 天时间来完成了大部分前端代码的编写。

在此过程中，我使用的是【模拟数据】和【Postman】的【Mock Server】进行单元测试。

### 3.6. 集成测试

这是最痛苦的一个阶段，但同时也是整个项目正式成型的阶段。通过连接后端的服务器，我们对数据的拿取做到了动态的响应；于此同时，我们也发现了之前 API 设计的某些缺陷和不足，进行了修改。最重要的是我们对程序进行了 debug，发现了许多漏洞，并及时地进行了更改。

在确定程序基本没有问题之后，小组的其它成员下载了我的代码，并连接后端服务器进行了最终展示数据的录入。

### 3.7. 系统实施

项目的最终验收。在演示的过程中，老师针对项目的不同模块给出了相应的改善建议。

## 4. 项目亮点

- 在显示详情信息时，应用会根据帖子的不同类型进行相应的图标映射，提升了用户的使用体验
- 在不同界面展示帖子使用了不同的布局
  - 社区界面：用户可见范围内只有一张显示帖子的卡片，可以提高用户刷帖子的沉浸式体验
  - 个人动态：在屏幕视口宽度的范围内展示两张帖子的卡片，方便用户进行帖子的管理
  - 宠物画廊：以九宫格的形式进行呈现，顾名思义”画廊“
- 通过无限滚动，进行社区界面中帖子展示的分页，优化了系统性能

## 5. 遇到的困难 & 解决方法 & 学到的经验

### 5.1. 移动端的 UI/UX 设计

由于我之前做的项目都是适配 PC 端的，也没有做响应式设计；因此，这次的项目是我第一次做适配移动端的 web app。尽管移动端和 PC 端的 web app 使用的前端技术栈基本相同（做的不是原生 app），这两者的 UI/UX 上还是有很大区别的。

考虑到 PC 端有较大的屏幕宽度，页面信息基本能够以平摊的方式来展示出来，使用滚动条的频率也相对小；而对于屏幕宽度窄，高度长的移动端设备来说，要尽可能充分利用此特点的方式就是增加用户划动界面的频率（即 PC 端的滚动条）。

这里就涉及到了移动端界面的无限滚动功能。一开始我认为该功能实现困难，因为也许需要涉及使用队列来进行帖子 DOM 的动态变化（在往下刷帖子的时候，上面刷过的帖子要消失）

但是事实证明，我的担心来自我对于移动端交互实现的不熟悉。与 PC 端的分页功能不同（每次点击下一页的时候展示当前一整页的内容，而不展示前一页的内容）；对于移动端，在获取下一个分页的内容之后，前一个分页的内容还是存在的，并不需要移除。而 Vuetify 中也是提供了无限滚动的控件，只需要定义当用户划到页面底端时触发的函数即可。

除此之外，与 PC 端的顶部导航栏不同的是，大多数移动端应用的导航栏位于屏幕底部。

---

**参考界面的截图（帖子）**

<Row gap="32">
  <Column flex="1">![Instagram](/images/projects/fop/image-08.jpg)</Column>
  <Column flex="1">![闲鱼](/images/projects/fop/image-09.jpg)</Column>
  <Column flex="1">![小红书](/images/projects/fop/image-10.jpg)</Column>
</Row>

在对此类界面的原型设计过程中，我参考了当前主流社交 app 界面的交互方式。研究之后，我发现大部分帖子是使用了【卡片】这一控件对内容进行展示，并且图片的占比较大。相应的，在 Vuetify 中，就需要使用 Card 与 Carousel 控件相结合。

---

**参考界面的截图（输入）**

<Row gap="32">
  <Column flex="1">![Instagram](/images/projects/fop/image-11.jpg)</Column>
  <Column flex="1">![闲鱼](/images/projects/fop/image-12.jpg)</Column>
  <Column flex="1">![小红书](/images/projects/fop/image-13.jpg)</Column>
</Row>

对于类表单输入的控件，则是大多数使用弹窗的形式使用户进行输入内容，与 PC 端的表单控件相比就更为复杂。要解决该功能，就需要添加更多的响应式变量。相应的，在 Vue3 中，就需要使用更多的 ref/reactive 或 computed 钩子来与 html 元素进行绑定 Vuetify 中的 Sheet 控件的可见性与数据保存。

### 5.2. 遇到的 Bugs

在集成测试阶段，我们使用不同用户进行登录登出的时候遇到了会登进错误用户账号的情况；经过分析，我发现了是由于我将一个动态的 axios config 参数（把 jwt 令牌放进请求的 headers 中）存入了环境变量中进行引用来使用，导致每次从 config 文件中 get 到的 Cookie 都是之前留存在浏览器中的，无法即时更新，导致此 Bug 的出现。

```jsx
import Cookies from "js-cookie";
const config = { headers: { token: Cookies.get("userToken") } };
export default config;
```

```jsx
import config from "@/CONST/config";

const postsRes = await axios.get(`${baseURL}/posts?uid=${uid}`, {
  config,
});
```

---

对于此问题，解决方法就是少偷点懒，在每次发送 axios 请求的时候都手动多写一个`config`的参数，在现场调用 `Cookies.get(’userToken’)` 方法，就不会出现该 bug 了。

```jsx
// import config from "@/CONST/config";

const postsRes = await axios.get(`${baseURL}/posts?uid=${uid}`, {
  headers: { token: Cookies.get("userToken") },
});
```

---

除此之外，还遇到了很多小 bug，出现错误的原因有如下这些情况：

**`cannot read properties of null`**

解决方法：使用可选链运算符 ?.

```jsx
<Title :title="postInfo.reactiveData?.title"></Title>
```

**`defineEmits`的数据出错**

解决方法：需要对变量进行解构

```jsx
const { isMyProfile } = defineProps(["is-my-profile"]);
```

**响应式数据读取值失败**

解决方法：

- 在`<script setup></script>`中，对于`ref`数据需要对`.value`进行读取，对于`reactive`数据则直接读取
- 在`<template></template>`中使用`ref`和`reactive`数据皆直接使用即可

```jsx
import { ref, reactive } from "vue";

let curView = ref(0);
const var = curView.value;

let postInfo = reactive({ reactiveData: null });
const username = postInfo.reactiveData?.username;
```

## 6. 项目结果

在最后的系统实施阶段，我们基本完成了预期中的所有功能。但是由于开发时间的原因，有一些功能没有完善的特别好。例如无限滚动的分页功能；此功能在社区主页中得到了实施，但是由于时间不足，没能够在帖子详情中的评论区模块中应用到。但是考虑到此功能在类似的模块中已经得到实现，证明了我已经掌握了该技术的实现方法；如果在时间充分的情况下，是能够将此技术投放到其它模块中的。

对于系统稳定性而言，经过验收前的测试，本系统的鲁棒性还是较为可观的。在移动端，经过注册和登录，用户能够对帖子和评论进行新增、查看和删除；在 PC 端，管理员可以对帖子和评论进行审查，并且能够封禁不符合系统使用规范的帖子、评论和用户。

对于不符合规范的输入，系统具有良好的表单验证功能，可以防止用户发表不符合数据规范的帖子、评论和注册表单；对于请求的发送和接收，也对请求失败的情况进行了处理，防止系统的异常崩溃。

## 7. 未来可实施的改进

### 7.1. 图片存储格式

由于本次项目我第一次接触到图片的存储，对这方面的了解不是很多。总之，我们在本项目中选择了 base64 作为图片的存储和传输格式，导致每次帖子的加载时间都很长，严重降低了系统的性能。

根据老师的建议，我们应当使用 url 的形式来对图像进行存储，这样能够大大减小每次响应包的大小，从而提升数据加载的速度。

### 7.2. 移动端的检索和分类功能

按照帖子类型搜索的 API 在设计的时候有考虑到，并且在 PC 端也有相应的实现。但是在本项目周期中，没有充足的时间在移动端实现该功能；因此，模糊查询帖子标题、用户，以及对帖子类型进行分类的功能可以作为本项目在未来版本升级中引进的新功能。

### 7.3. 点赞的用户追踪

对于目前项目的点赞功能，本系统无法对于点赞进行用户的追踪，导致用户能对相同的帖子进行多次的点赞，而这点是明显不符合业务逻辑的。但是此功能可以作为系统的未来改进实施。

### 7.4. UI/UX 的完善

尽管移动端的 UI 界面大致符合了用户在手机上所期待的视图，界面仍有美化的空间。除此之外，UX 体验也能够进行升级。例如：在当前系统中，用户需要通过长按来对评论进行删除；对此，老师建议能够对每个评论添加一个 Swipe 事件的监听器，使用户能够通过滑动评论进行删除。

由于这是我做的第一个适配移动端的界面，有一些设计的不足也是在意料之中；相信通过往后更多项目的历练，能够使我在设计移动端 UI/UX 时考虑得更加全面。

## 8. 个人成长

- 增加了对 Vue3 使用的熟练度
- 进一步了解了响应式 DOM 渲染组件的生命周期和运行原理
- 对移动端应用的 UI/UX 进行过了深入的研究，积累了相关经验
- 传输数据量的增加使我理解了系统性能优化的必要性
- 团队合作开发使我意识到使用 Github 能够方便组员进行代码的查看、克隆与管理
